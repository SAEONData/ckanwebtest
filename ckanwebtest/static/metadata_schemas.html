<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Metadata Schemas</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript">

        function list_() {
            $("#response").val("Loading metadata schema list...");
            $.ajax({
                url: "/metadata_schema_list",
                success: function (result) {
                    $("#response").val(result);
                },
                error: function (call, state, msg) {
                    $("#response").val(msg);
                }
            });
        }

        function create() {
            $("#response").val("Creating metadata schema...");
            $.ajax({
                url: "/metadata_schema_create",
                data: {
                    "title": $("#title").val(),
                    "schema_name": $("#schema_name").val(),
                    "schema_version": $("#schema_version").val(),
                    "schema_xsd": $("#schema_xsd").val(),
                    "base_schema_id": $("#base_schema_id").val(),
                },
                success: function (result) {
                    $("#response").val(result);
                },
                error: function (call, state, msg) {
                    $("#response").val(msg);
                }
            });
        }

        function update() {
            $("#response").val("Updating metadata schema...");
            $.ajax({
                url: "/metadata_schema_update",
                data: {
                    "id": $("#name").val(),
                    "title": $("#title").val(),
                    "schema_name": $("#schema_name").val(),
                    "schema_version": $("#schema_version").val(),
                    "schema_xsd": $("#schema_xsd").val(),
                    "base_schema_id": $("#base_schema_id").val(),
                },
                success: function (result) {
                    $("#response").val(result);
                },
                error: function (call, state, msg) {
                    $("#response").val(msg);
                }
            });
        }

        function delete_() {
            $("#response").val("Deleting metadata schema...");
            $.ajax({
                url: "/metadata_schema_delete",
                data: {
                    "id": $("#name").val(),
                },
                success: function (result) {
                    $("#response").val(result);
                },
                error: function (call, state, msg) {
                    $("#response").val(msg);
                }
            });
        }
    </script>
</head>
<body>
    <b>Configure Metadata Schemas</b>
    <table>
        <tr><td>Name:</td><td><input type="text" id="name"/> * for update only</td></tr>
        <tr><td>Title:</td><td><input type="text" id="title"/></td></tr>
        <tr><td>Schema Name:</td><td><input type="text" id="schema_name"/></td></tr>
        <tr><td>Schema Version:</td><td><input type="text" id="schema_version"/></td></tr>
        <tr><td>Schema XSD:</td><td><textarea id="schema_xsd" style="width: 800px; height: 200px"></textarea></td></tr>
        <tr><td>Base Schema ID:</td><td><input type="text" id="base_schema_id"/></td></tr>
        <tr><td>Submit:</td><td>
            <input type="button" value="List All" onclick="list_();"/>
            <input type="button" value="Create" onclick="create();"/>
            <input type="button" value="Update" onclick="update();"/>
            <input type="button" value="Delete" onclick="delete_();"/>
        </td></tr>
        <tr><td>Response:</td><td><textarea readonly id="response" style="width: 800px; height: 800px"></textarea></td></tr>
    </table>
</body>
</html>